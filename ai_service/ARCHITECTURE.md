# ðŸŽ¨ PetZone AI System - Visual Architecture

## ðŸ“Š System Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          PetZone AI System                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ESP32     â”‚  Sensor Data: Temperature, Humidity,
â”‚   Device    â”‚  Presence Energy, Movement Energy
â”‚   (IoT)     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚ HTTP POST
       â”‚ /api/sensor
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        .NET Backend API (Port 5019)                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ SensorControllerâ”‚     â”‚  AiController   â”‚     â”‚ DeviceController â”‚  â”‚
â”‚  â”‚                 â”‚     â”‚                 â”‚     â”‚                  â”‚  â”‚
â”‚  â”‚ POST /sensor    â”‚     â”‚ POST /ai/alert  â”‚     â”‚ POST /device/    â”‚  â”‚
â”‚  â”‚ GET  /latest    â”‚     â”‚ POST /emergency â”‚     â”‚      activity    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                   â–²                        â–²              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚  â”‚         PostgreSQL Database    â”‚                                      â”‚
â”‚  â”‚  Tables: SensorReadings,       â”‚                                      â”‚
â”‚  â”‚          AiDetections,          â”‚                                      â”‚
â”‚  â”‚          DeviceActivities       â”‚                                      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â”‚ HTTP GET /api/sensor/latest
             â”‚ (Every 5 seconds)
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      AI Service (Port 5001)                               â”‚
â”‚                      ai_service_main.py                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                    Background Monitoring Loop                       â”‚ â”‚
â”‚  â”‚                                                                      â”‚ â”‚
â”‚  â”‚  1. Fetch sensor data from backend                                 â”‚ â”‚
â”‚  â”‚  2. Pass to AI Decision Engine â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚ â”‚
â”‚  â”‚  3. Get intelligent decision                          â”‚            â”‚ â”‚
â”‚  â”‚  4. Execute actions via IoT Controller â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚            â”‚ â”‚
â”‚  â”‚  5. Send alerts to backend                       â”‚    â”‚            â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                      â”‚    â”‚               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    â”‚               â”‚
â”‚  â”‚         Flask API Server                      â”‚  â”‚    â”‚               â”‚
â”‚  â”‚                                               â”‚  â”‚    â”‚               â”‚
â”‚  â”‚  GET  /status      - Current AI state        â”‚  â”‚    â”‚               â”‚
â”‚  â”‚  GET  /stats       - Statistics              â”‚  â”‚    â”‚               â”‚
â”‚  â”‚  POST /test_analysis - Test AI              â”‚  â”‚    â”‚               â”‚
â”‚  â”‚  POST /manual_control - Manual override      â”‚  â”‚    â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â”‚               â”‚
â”‚                                                      â–¼    â–¼               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚    AI Decision Engine        â”‚  â”‚      IoT Controller              â”‚ â”‚
â”‚  â”‚  ai_decision_engine.py       â”‚  â”‚    iot_controller.py             â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚                              â”‚  â”‚                                  â”‚ â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚ â€¢ Send HTTP commands to ESP32  â”‚ â”‚
â”‚  â”‚ â”‚   Fuzzy Logic Engine     â”‚ â”‚  â”‚ â€¢ Device state management      â”‚ â”‚
â”‚  â”‚ â”‚                          â”‚ â”‚  â”‚ â€¢ Command history tracking     â”‚ â”‚
â”‚  â”‚ â”‚ â€¢ Temperature fuzzy sets â”‚ â”‚  â”‚ â€¢ Backend logging              â”‚ â”‚
â”‚  â”‚ â”‚ â€¢ Humidity fuzzy sets    â”‚ â”‚  â”‚                                  â”‚ â”‚
â”‚  â”‚ â”‚ â€¢ Pet status fuzzy sets  â”‚ â”‚  â”‚ Methods:                        â”‚ â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ â€¢ turn_on_fan()                 â”‚ â”‚
â”‚  â”‚                              â”‚  â”‚ â€¢ turn_off_fan()                â”‚ â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚ â€¢ turn_on_heater()              â”‚ â”‚
â”‚  â”‚ â”‚  Intelligent Decision    â”‚ â”‚  â”‚ â€¢ turn_off_heater()             â”‚ â”‚
â”‚  â”‚ â”‚                          â”‚ â”‚  â”‚ â€¢ turn_on_humidifier()          â”‚ â”‚
â”‚  â”‚ â”‚ â€¢ Risk scoring system    â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”‚ â”‚ â€¢ Weighted combination   â”‚ â”‚                â”‚                      â”‚
â”‚  â”‚ â”‚ â€¢ Confidence calculation â”‚ â”‚                â”‚ HTTP POST            â”‚
â”‚  â”‚ â”‚ â€¢ Contextual messages    â”‚ â”‚                â”‚ /control             â”‚
â”‚  â”‚ â”‚ â€¢ Decision history       â”‚ â”‚                â–¼                      â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                              â”‚  â”‚         ESP32 Device             â”‚ â”‚
â”‚  â”‚ Output:                      â”‚  â”‚    esp32_controller.ino          â”‚ â”‚
â”‚  â”‚ â€¢ Alert level                â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚ â€¢ Actions to take            â”‚  â”‚                                  â”‚ â”‚
â”‚  â”‚ â€¢ Message                    â”‚  â”‚ Web Server (Port 80):            â”‚ â”‚
â”‚  â”‚ â€¢ Confidence score           â”‚  â”‚ â€¢ POST /control                  â”‚ â”‚
â”‚  â”‚ â€¢ Reasoning                  â”‚  â”‚ â€¢ GET  /status                   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                                  â”‚ â”‚
â”‚                                     â”‚ Device Control:                  â”‚ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â€¢ Fan (PWM Pin 25)               â”‚ â”‚
                                      â”‚ â€¢ Heater (PWM Pin 26)            â”‚ â”‚
                                      â”‚ â€¢ Humidifier (PWM Pin 27)        â”‚ â”‚
                                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
                                                                             â”‚
```

## ðŸ”„ Data Flow Example

### Example: Temperature 35Â°C Detection

```
1. ESP32 Sensor
   â”œâ”€ Temperature: 35Â°C
   â”œâ”€ Humidity: 65%
   â”œâ”€ Presence: 80
   â””â”€ Movement: 50
         â”‚
         â”‚ HTTP POST
         â–¼
2. Backend (.NET)
   â””â”€ Save to SensorReadings table
         â”‚
         â”‚ Polled by AI Service
         â–¼
3. AI Decision Engine
   â”œâ”€ Fuzzy Logic Analysis:
   â”‚  â”œâ”€ Temperature memberships:
   â”‚  â”‚  â”œâ”€ warm: 0.5 (50%)
   â”‚  â”‚  â””â”€ very_hot: 0.769 (77%)
   â”‚  â”‚
   â”‚  â”œâ”€ Risk Calculation:
   â”‚  â”‚  â””â”€ temp_risk = 0.95 (CRITICAL)
   â”‚  â”‚
   â”‚  â””â”€ Weighted Decision:
   â”‚     â””â”€ combined_risk = 0.87 (CRITICAL)
   â”‚
   â””â”€ AI Decision:
      â”œâ”€ Alert: CRITICAL
      â”œâ”€ Actions: [turn_on_fan, emergency_alert]
      â”œâ”€ Confidence: 92.3%
      â””â”€ Message: "ðŸ”¥ Cáº¢NH BÃO NGHIÃŠM TRá»ŒNG..."
            â”‚
            â–¼
4. IoT Controller
   â”œâ”€ Calculate fan intensity: 100%
   â”œâ”€ Send HTTP to ESP32:
   â”‚  POST http://192.168.1.100/control
   â”‚  Body: {"device":"fan","state":1,"intensity":100}
   â”‚
   â””â”€ Log to Backend:
      POST http://localhost:5019/api/device/activity
            â”‚
            â–¼
5. ESP32 Device
   â”œâ”€ Receive command
   â”œâ”€ Set Fan PWM: 255 (100%)
   â””â”€ Response: {"status":"success"}
            â”‚
            â–¼
6. Backend (.NET)
   â”œâ”€ Save DeviceActivity
   â”œâ”€ Save AiDetection (Emergency Alert)
   â””â”€ Available for Frontend display
```

## ðŸ§  AI Decision Process (Fuzzy Logic)

```
Input: SensorData
   â”‚
   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         STEP 1: Fuzzy Membership Calculation         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                       â”‚
â”‚ Temperature 35Â°C â†’                                    â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚   â”‚ very_cold:   0.0                         â”‚       â”‚
â”‚   â”‚ cold:        0.0                         â”‚       â”‚
â”‚   â”‚ comfortable: 0.0                         â”‚       â”‚
â”‚   â”‚ warm:        0.5  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘    â”‚       â”‚
â”‚   â”‚ very_hot:    0.769 â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘   â”‚       â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                       â”‚
â”‚ Humidity 65% â†’                                        â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚   â”‚ very_dry:    0.0                         â”‚       â”‚
â”‚   â”‚ dry:         0.0                         â”‚       â”‚
â”‚   â”‚ comfortable: 0.75 â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘   â”‚       â”‚
â”‚   â”‚ humid:       0.1  â–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘   â”‚       â”‚
â”‚   â”‚ very_humid:  0.0                         â”‚       â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                       â”‚
â”‚ Pet Status (Presence=80, Movement=50) â†’              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚   â”‚ no_detection: 0.0                        â”‚       â”‚
â”‚   â”‚ empty_cage:   0.2  â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  â”‚       â”‚
â”‚   â”‚ pet_sleeping: 0.32 â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  â”‚       â”‚
â”‚   â”‚ pet_active:   0.4  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘   â”‚       â”‚
â”‚   â”‚ pet_restless: 0.0                        â”‚       â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚
   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         STEP 2: Risk Scoring                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                       â”‚
â”‚ temp_risk = Î£(membership * risk_weight)              â”‚
â”‚           = 0.5 * 0.6 + 0.769 * 1.0                  â”‚
â”‚           = 0.95 (CRITICAL)                          â”‚
â”‚                                                       â”‚
â”‚ humidity_risk = 0.75 * 0.0 + 0.1 * 0.6               â”‚
â”‚               = 0.06 (SAFE)                          â”‚
â”‚                                                       â”‚
â”‚ pet_risk = 0.2 * 0.3 + 0.32 * 0.0 + 0.4 * 0.0        â”‚
â”‚          = 0.06 (SAFE)                               â”‚
â”‚                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚
   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         STEP 3: Weighted Combination                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                       â”‚
â”‚ combined_risk = (temp_risk Ã— 0.9 +                   â”‚
â”‚                  humidity_risk Ã— 0.7 +               â”‚
â”‚                  pet_risk Ã— 0.8)                     â”‚
â”‚                 Ã· (0.9 + 0.7 + 0.8)                  â”‚
â”‚                                                       â”‚
â”‚               = (0.95Ã—0.9 + 0.06Ã—0.7 + 0.06Ã—0.8)     â”‚
â”‚                 Ã· 2.4                                â”‚
â”‚                                                       â”‚
â”‚               = 0.873 (CRITICAL)                     â”‚
â”‚                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚
   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         STEP 4: Action Inference                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                       â”‚
â”‚ hot_degree = warm Ã— 0.5 + very_hot Ã— 1.0             â”‚
â”‚            = 0.5 Ã— 0.5 + 0.769 Ã— 1.0                 â”‚
â”‚            = 1.019                                   â”‚
â”‚                                                       â”‚
â”‚ IF hot_degree > 0.4:                                 â”‚
â”‚    â””â”€> Action: TURN_ON_FAN âœ“                         â”‚
â”‚                                                       â”‚
â”‚ IF combined_risk > 0.8:                              â”‚
â”‚    â””â”€> Action: EMERGENCY_ALERT âœ“                     â”‚
â”‚                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚
   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         STEP 5: Generate Decision                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                       â”‚
â”‚ AIDecision {                                          â”‚
â”‚   alert_level: CRITICAL                              â”‚
â”‚   actions: [turn_on_fan, emergency_alert]            â”‚
â”‚   message: "ðŸ”¥ Cáº¢NH BÃO NGHIÃŠM TRá»ŒNG..."             â”‚
â”‚   confidence: 0.923                                  â”‚
â”‚   reasoning: { ... }                                 â”‚
â”‚ }                                                     â”‚
â”‚                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ðŸ“ˆ Why Fuzzy Logic is Better than If-Else

### Traditional If-Else Approach âŒ

```python
if temperature > 32:
    turn_on_fan()
    alert = "HOT"
elif temperature < 10:
    alert = "COLD"
else:
    alert = "NORMAL"
```

**Problems:**
- âŒ Hard boundaries (32.0Â°C vs 31.9Â°C treated completely different)
- âŒ No gradual transition
- âŒ Cannot handle uncertainty
- âŒ No contextual reasoning
- âŒ Binary decisions (on/off)

### Fuzzy Logic Approach âœ…

```python
# Temperature can belong to multiple sets simultaneously
temp_fuzzy = {
    'comfortable': 0.2,  # 20% comfortable
    'warm': 0.5,         # 50% warm
    'very_hot': 0.3      # 30% very hot
}

# Smooth transition, contextual decision
risk = weighted_combination(temp_fuzzy, humidity_fuzzy, pet_fuzzy)
action = fuzzy_inference(risk)
```

**Advantages:**
- âœ… Smooth transitions between states
- âœ… Handles uncertainty naturally
- âœ… Contextual reasoning (considers all factors)
- âœ… Gradual control (fan intensity adapts)
- âœ… More human-like decision making

## ðŸŽ¯ Real-World Comparison

### Scenario: Temperature = 31.5Â°C

**If-Else Logic:**
```
31.5 < 32 â†’ NO ACTION
(But it's still hot!)
```

**Fuzzy Logic:**
```
Temperature 31.5Â°C:
â”œâ”€ comfortable: 0.05 (5%)
â”œâ”€ warm: 0.85 (85%)
â””â”€ very_hot: 0.1 (10%)

hot_degree = 0.85 Ã— 0.5 + 0.1 Ã— 1.0 = 0.525

Decision: Turn on fan at 60% intensity
(Smooth, gradual response!)
```

---

Made with â¤ï¸ by PetZone AI Team
